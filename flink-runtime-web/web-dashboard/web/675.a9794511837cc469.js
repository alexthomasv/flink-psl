"use strict";(self.webpackChunkflink=self.webpackChunkflink||[]).push([[675],{40870:(P,h,o)=>{o.d(h,{c:()=>f});var c=o(69808),e=o(5e3);let f=(()=>{class l{constructor(r){this.locale=r}transform(r,_="mediumDate",O,m){if(null==r||""===r||r!=r||r<0)return"\u2013";try{return(0,c.p6)(r,_,m||this.locale,O)}catch(T){}}}return l.\u0275fac=function(r){return new(r||l)(e.Y36(e.soG,16))},l.\u0275pipe=e.Yjl({name:"humanizeDate",type:l,pure:!0}),l})()},7963:(P,h,o)=>{function c(e){return null==e}o.d(h,{k:()=>c})},74450:(P,h,o)=>{o.d(h,{XZ:()=>N,qw:()=>w});var c=o(70655),e=o(5e3),f=o(93075),l=o(96831),E=o(591),r=o(21086),_=o(8929),O=o(36053),m=o(23753),T=o(22868),L=o(24850),u=o(7625),A=o(80013),j=o(92198),B=o(75778),C=o(56947),v=o(31721),p=o(69808),U=o(39439),b=o(70925),y=o(17525),S=o(70647);function K(i,d){1&i&&(e.TgZ(0,"div",2),e._UZ(1,"nz-spin"),e.qZA())}function W(i,d){}function $(i,d){if(1&i&&(e.TgZ(0,"div",3),e.YNc(1,W,0,0,"ng-template",4),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngTemplateOutlet",t.nzToolkit)}}const z="codeEditor";function D(i){return(...d)=>{i&&i(...d)}}const M=new l.t(1);let g="unload",F=(()=>{class i{constructor(t,n){this.nzConfigService=t,this.firstEditorInitialized=!1,this.option={},this.option$=new E.X(this.option);const a=this.nzConfigService.getConfigForComponent(z);this.document=n,this.config=Object.assign({},a),this.config.monacoEnvironment&&(window.MonacoEnvironment=Object.assign({},this.config.monacoEnvironment)),this.option=this.config.defaultEditorOption||{},this.subscription=this.nzConfigService.getConfigChangeEventForComponent(z).subscribe(()=>{const s=this.nzConfigService.getConfigForComponent(z);s&&this._updateDefaultOption(s.defaultEditorOption)})}ngOnDestroy(){this.subscription.unsubscribe(),this.subscription=null}_updateDefaultOption(t){this.option=Object.assign(Object.assign({},this.option),t),this.option$.next(this.option),"theme"in t&&t.theme&&monaco.editor.setTheme(t.theme)}requestToInit(){return"LOADED"===g?(this.onInit(),(0,r.of)(this.getLatestOption())):("unload"===g&&(this.config.useStaticLoading&&"undefined"==typeof monaco?(0,C.ZK)("You choose to use static loading but it seems that you forget to config webpack plugin correctly. Please refer to our official websitefor more details about static loading."):this.loadMonacoScript()),M.pipe((0,T.b)(()=>this.onInit()),(0,L.U)(()=>this.getLatestOption())))}loadMonacoScript(){if(this.config.useStaticLoading)return void Promise.resolve().then(()=>this.onLoad());if("loading"===g)return;g="loading";const t=this.config.assetsRoot,n=t?`${t}/vs`:"assets/vs",a=window,s=this.document.createElement("script");s.type="text/javascript",s.src=`${n}/loader.js`;const I=()=>{R(),a.require.config(Object.assign({paths:{vs:n}},this.config.extraConfig)),a.require(["vs/editor/editor.main"],()=>{this.onLoad()})},x=()=>{throw R(),new Error(`${C.Bq} cannot load assets of monaco editor from source "${n}".`)},R=()=>{s.removeEventListener("load",I),s.removeEventListener("error",x),this.document.documentElement.removeChild(s)};s.addEventListener("load",I),s.addEventListener("error",x),this.document.documentElement.appendChild(s)}onLoad(){g="LOADED",M.next(!0),M.complete(),D(this.config.onLoad)()}onInit(){this.firstEditorInitialized||(this.firstEditorInitialized=!0,D(this.config.onFirstEditorInit)()),D(this.config.onInit)()}getLatestOption(){return Object.assign({},this.option)}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(U.jY),e.LFG(p.K0))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),N=(()=>{class i{constructor(t,n,a,s){this.nzCodeEditorService=t,this.ngZone=n,this.platform=s,this.nzEditorMode="normal",this.nzOriginalText="",this.nzLoading=!1,this.nzFullControl=!1,this.nzEditorInitialized=new e.vpe,this.editorOptionCached={},this.destroy$=new _.xQ,this.resize$=new _.xQ,this.editorOption$=new E.X({}),this.editorInstance=null,this.value="",this.modelSet=!1,this.onDidChangeContentDisposable=null,this.onChange=I=>{},this.onTouch=()=>{},this.el=a.nativeElement,this.el.classList.add("ant-code-editor")}set nzEditorOption(t){this.editorOption$.next(t)}ngAfterViewInit(){!this.platform.isBrowser||this.nzCodeEditorService.requestToInit().pipe((0,u.R)(this.destroy$)).subscribe(t=>this.setup(t))}ngOnDestroy(){this.onDidChangeContentDisposable&&(this.onDidChangeContentDisposable.dispose(),this.onDidChangeContentDisposable=null),this.editorInstance&&(this.editorInstance.dispose(),this.editorInstance=null),this.destroy$.next(),this.destroy$.complete()}writeValue(t){this.value=t,this.setValue()}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouch=t}layout(){this.resize$.next()}setup(t){this.ngZone.runOutsideAngular(()=>(0,v.ov)().pipe((0,u.R)(this.destroy$)).subscribe(()=>{this.editorOptionCached=t,this.registerOptionChanges(),this.initMonacoEditorInstance(),this.registerResizeChange(),this.setValue(),this.nzFullControl||this.setValueEmitter(),this.nzEditorInitialized.observers.length&&this.ngZone.run(()=>this.nzEditorInitialized.emit(this.editorInstance))}))}registerOptionChanges(){(0,O.aj)([this.editorOption$,this.nzCodeEditorService.option$]).pipe((0,u.R)(this.destroy$)).subscribe(([t,n])=>{this.editorOptionCached=Object.assign(Object.assign(Object.assign({},this.editorOptionCached),n),t),this.updateOptionToMonaco()})}initMonacoEditorInstance(){this.ngZone.runOutsideAngular(()=>{this.editorInstance="normal"===this.nzEditorMode?monaco.editor.create(this.el,Object.assign({},this.editorOptionCached)):monaco.editor.createDiffEditor(this.el,Object.assign({},this.editorOptionCached))})}registerResizeChange(){this.ngZone.runOutsideAngular(()=>{(0,m.R)(window,"resize").pipe((0,A.b)(300),(0,u.R)(this.destroy$)).subscribe(()=>{this.layout()}),this.resize$.pipe((0,u.R)(this.destroy$),(0,j.h)(()=>!!this.editorInstance),(0,L.U)(()=>({width:this.el.clientWidth,height:this.el.clientHeight})),(0,B.x)((t,n)=>t.width===n.width&&t.height===n.height),(0,A.b)(50)).subscribe(()=>{this.editorInstance.layout()})})}setValue(){if(this.editorInstance){if(this.nzFullControl&&this.value)return void(0,C.ZK)("should not set value when you are using full control mode! It would result in ambiguous data flow!");if("normal"===this.nzEditorMode)if(this.modelSet){const t=this.editorInstance.getModel();this.preservePositionAndSelections(()=>t.setValue(this.value))}else this.editorInstance.setModel(monaco.editor.createModel(this.value,this.editorOptionCached.language)),this.modelSet=!0;else if(this.modelSet){const t=this.editorInstance.getModel();this.preservePositionAndSelections(()=>{t.modified.setValue(this.value),t.original.setValue(this.nzOriginalText)})}else{const t=this.editorOptionCached.language;this.editorInstance.setModel({original:monaco.editor.createModel(this.nzOriginalText,t),modified:monaco.editor.createModel(this.value,t)}),this.modelSet=!0}}}preservePositionAndSelections(t){if(!this.editorInstance)return void t();const n=this.editorInstance.getPosition(),a=this.editorInstance.getSelections();t(),n&&this.editorInstance.setPosition(n),a&&this.editorInstance.setSelections(a)}setValueEmitter(){const t="normal"===this.nzEditorMode?this.editorInstance.getModel():this.editorInstance.getModel().modified;this.onDidChangeContentDisposable=t.onDidChangeContent(()=>{this.emitValue(t.getValue())})}emitValue(t){this.value!==t&&(this.value=t,this.ngZone.run(()=>{this.onChange(t)}))}updateOptionToMonaco(){this.editorInstance&&this.editorInstance.updateOptions(Object.assign({},this.editorOptionCached))}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(F),e.Y36(e.R0b),e.Y36(e.SBq),e.Y36(b.t4))},i.\u0275cmp=e.Xpm({type:i,selectors:[["nz-code-editor"]],inputs:{nzEditorMode:"nzEditorMode",nzOriginalText:"nzOriginalText",nzLoading:"nzLoading",nzFullControl:"nzFullControl",nzToolkit:"nzToolkit",nzEditorOption:"nzEditorOption"},outputs:{nzEditorInitialized:"nzEditorInitialized"},exportAs:["nzCodeEditor"],features:[e._Bn([{provide:f.JU,useExisting:(0,e.Gpc)(()=>i),multi:!0}])],decls:2,vars:2,consts:[["class","ant-code-editor-loading",4,"ngIf"],["class","ant-code-editor-toolkit",4,"ngIf"],[1,"ant-code-editor-loading"],[1,"ant-code-editor-toolkit"],[3,"ngTemplateOutlet"]],template:function(t,n){1&t&&(e.YNc(0,K,2,0,"div",0),e.YNc(1,$,2,1,"div",1)),2&t&&(e.Q6J("ngIf",n.nzLoading),e.xp6(1),e.Q6J("ngIf",n.nzToolkit))},directives:[y.W,p.O5,p.tP],encapsulation:2,changeDetection:0}),(0,c.gn)([(0,v.yF)()],i.prototype,"nzLoading",void 0),(0,c.gn)([(0,v.yF)()],i.prototype,"nzFullControl",void 0),i})(),w=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[p.ez,S.PV,y.j]]}),i})()}}]);